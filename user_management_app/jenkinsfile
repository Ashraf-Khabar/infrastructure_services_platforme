pipeline {
    agent any
    stages {
        stage('Check .NET') {
            steps {
                script {
                    if (isUnix()) {
                        sh '''
                        echo "Vérification de .NET..."
                        if command -v dotnet >/dev/null 2>&1; then
                            dotnet --version
                            echo ".NET est déjà installé"
                        else
                            echo ".NET n'est pas installé"
                            exit 1
                        fi
                        '''
                    } else {
                        bat '''
                        echo "Vérification de .NET..."
                        dotnet --version
                        if %errorlevel% equ 0 (
                            echo .NET est déjà installé
                        ) else (
                            echo .NET n'est pas installé
                            exit 1
                        )
                        '''
                    }
                }
            }
        }
    }
}