pipeline {
    agent any
    
    environment {
        DOTNET_ROOT = "${WORKSPACE}/dotnet"
        PATH = "${env.DOTNET_ROOT}:${env.PATH}"
        DOTNET_SYSTEM_GLOBALIZATION_INVARIANT = "1"
    }
    
    stages {
        stage('Installation .NET') {
            steps {
                script {
                    sh '''
                        # Installer .NET localement
                        curl -sSL https://dot.net/v1/dotnet-install.sh -o dotnet-install.sh
                        chmod +x dotnet-install.sh
                        ./dotnet-install.sh --channel 8.0 --install-dir ./dotnet
                        
                        # VÃ©rifier avec mode invariant
                        DOTNET_SYSTEM_GLOBALIZATION_INVARIANT=1 ./dotnet/dotnet --version
                    '''
                }
            }
        }
        
        stage('Build') {
            steps {
                sh 'ls -la'
            }
        }
    }
}